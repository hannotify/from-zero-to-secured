<!-- .slide: data-background="img/background/binary-code.jpg" data-background-color="black" data-background-opacity="0.2" -->

## Limit Enabled Features

let's **limit** the number of enabled OpenLiberty features 
using the `generate-features` goal of the Liberty Maven plugin

<https://pxhere.com/en/photo/1458897> <!-- .element: class="attribution" -->

---

### Why Would We Limit Enabled Features?

* less features means faster startup <!-- .element: class="fragment fade-in-then-semi-out" -->
* less features means lower memory footprint <!-- .element: class="fragment fade-in-then-semi-out" -->

---

### Using Two Convenience Features

```xml
<featureManager>
    <feature>jakartaee-10.0</feature>
    <feature>microProfile-7.0</feature>
</featureManager>
```

---

### results in:

<pre><code class="plaintext" data-line-numbers data-trim>
[appAuthentication-3.0, 
appAuthorization-2.1, 
appClientSupport-2.0, 
appSecurity-5.0, 
batch-2.1, 
beanValidation-3.0, 
cdi-4.0, 
concurrent-3.0, 
connectors-2.1, 
distributedMap-1.0, 
enterpriseBeans-4.0, 
enterpriseBeansHome-4.0, 
enterpriseBeansLite-4.0, 
enterpriseBeansPersistentTimer-4.0, 
enterpriseBeansRemote-4.0, 
expressionLanguage-5.0, 
faces-4.0, 
jakartaee-10.0, 
jdbc-4.2, 
jndi-1.0, 
json-1.0, 
jsonb-3.0, 
jsonp-2.1, 
jwt-1.0, 
mail-2.1, 
managedBeans-2.0, 
mdb-4.0, 
messaging-3.1, 
messagingClient-3.0, 
messagingSecurity-3.0, 
messagingServer-3.0, 
microProfile-7.0, 
monitor-1.0, 
mpConfig-3.1, 
mpFaultTolerance-4.1, 
mpHealth-4.0, 
mpJwt-2.1, 
mpOpenAPI-4.0, 
mpRestClient-4.0,
mpTelemetry-2.0, 
pages-3.1, 
persistence-3.1, 
persistenceContainer-3.1, 
restfulWS-3.1, 
restfulWSClient-3.1, 
servlet-6.0, 
ssl-1.0, 
transportSecurity-1.0, 
webProfile-10.0, 
websocket-2.1, 
xmlBinding-4.0, 
xmlWS-4.0]
</code></pre>

and: 

```plaintext
The defaultServer server started in 9,023 seconds..
```

---

## Generate Features

Run `liberty:dev` with `-DgenerateFeatures=true`

or

`mvn compile liberty:generate-features`

<small class="fragment fade-in-then-semi-out">
<br/>
This will detect the features that you use in your code. <br/> The list of detected features is then exported to <code>generated-features.xml</code>.<br/><br/>
More on feature generation:<br/><a href="https://openliberty.io/blog/2022/02/08/feature-generation-tech-preview.html">openliberty.io/blog/2022/02/08/feature-generation-tech-preview.html</a>
</small>

---

`generated-features.xml`

<pre><code class="xml" data-line-numbers data-trim>
<?xml version="1.0" encoding="UTF-8"?>
<server>
    <!--This file was generated by the Liberty Maven Plugin and will be overwritten on subsequent runs of the liberty:generate-features goal.
    It is recommended that you do not edit this file and that you commit this file to your version control.-->
    <featureManager>
        <!--The following features were generated based on API usage detected in your application-->
        <feature>mpFaultTolerance-4.0</feature>
        <feature>jsonb-3.0</feature>
        <feature>restfulWS-3.1</feature>
        <feature>persistence-3.1</feature>
        <feature>appSecurity-5.0</feature>
        <feature>cdi-4.0</feature>
        <feature>mpOpenAPI-3.1</feature>
    </featureManager>
</server>
</code></pre>

---

### This results in:

<pre><code class="plaintext" data-line-numbers data-trim>
[appSecurity-5.0, 
cdi-4.0, 
distributedMap-1.0, 
expressionLanguage-5.0, 
jdbc-4.2, 
jndi-1.0, 
jsonb-3.0, 
jsonp-2.1, 
jwt-1.0, 
mpConfig-3.0, 
mpFaultTolerance-4.0, 
mpJwt-2.1, 
mpOpenAPI-3.1, 
persistence-3.1, 
persistenceContainer-3.1, 
restfulWS-3.1, 
restfulWSClient-3.1, 
servlet-6.0, 
ssl-1.0, 
transportSecurity-1.0]
</code></pre>

and: 

```plaintext
The defaultServer server started in 4,372 seconds..
```
